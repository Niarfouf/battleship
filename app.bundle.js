(()=>{"use strict";class t{constructor(t){this.length=t,this.hits=0,this.sunk=!1}hit(){this.hits+=1,this.hits===this.length&&(this.sunk=!0)}isSunk(){return this.sunk}}class e{constructor(t=10){this.board=e.createEmptyBoard(t),this.ships=[]}static createEmptyBoard(t){const e=[];for(let s=0;s<t;s+=1){const s=[];for(let e=0;e<t;e+=1)s.push({ship:null,hasBeenShot:!1});e.push(s)}return e}getBoard(){return this.board}getShips(){return this.ships}placeShip(e,s){const r=new t(e);return!!this.verifyCoordinate(s)&&(s.forEach((t=>{this.board[t[1]][t[0]].ship=r})),this.ships.push(r),!0)}receiveAttack(t){const e=this.board[t[1]][t[0]];return!0===e.hasBeenShot?{false:"alreadyTouched"}:(e.hasBeenShot=!0,e.ship?(e.ship.hit(),e.ship.isSunk()?{true:"sunk",coordinate:[...t]}:{true:"touched",coordinate:[...t]}):{true:"missed",coordinate:[...t]})}allShipsSunk(){return this.ships.reduce(((t,e)=>!(!e.sunk||!1===t)),!0)}verifyCoordinate(t){let e=!0;return t.forEach((t=>{(t[0]<0||t[1]<0||t[0]>9||t[1]>9)&&(e=!1),this.board[t[1]][t[0]].ship&&(e=!1)})),e}}class s{constructor(t){this.name=t}static attack(t,e=s.randomCoordinate()){return t.receiveAttack(e)}static randomCoordinate(){return[Math.floor(10*Math.random()),Math.floor(10*Math.random())]}getName(){return this.name}}function r(t){const e=document.querySelector("#main");e.textContent="";const s=document.createElement("h1");"Player"===t.name?s.textContent="You win !":s.textContent="You lose !",e.appendChild(s)}function a(t,e){const s=`${e}-cell`;let r;document.querySelectorAll(`.${s}`).forEach((e=>{parseInt(e.getAttribute("x"),10)===t.coordinate[0]&&parseInt(e.getAttribute("y"),10)===t.coordinate[1]&&(r=e)})),"touched"!==t.true&&"sunk"!==t.true||(r.classList.add("red"),r.classList.remove("blue"),r.classList.remove("black")),"missed"===t.true&&(r.classList.add("yellow"),r.classList.remove("black"))}const n=new e,c=new e,i=new s("Player"),o=new s("Computer");n.placeShip(3,[[0,1],[1,1],[2,1]]),n.placeShip(4,[[5,1],[5,2],[5,3],[5,4]]),c.placeShip(3,[[0,1],[1,1],[2,1]]),c.placeShip(4,[[5,1],[5,2],[5,3],[5,4]]),function(t,e){const s=document.querySelector("#main"),r=document.createElement("div"),a=document.createElement("div"),n=document.createElement("h1");n.innerText=e.getName(),r.appendChild(n),a.classList.add("grid"),t.getBoard().forEach(((t,e)=>{t.forEach(((t,s)=>{const r=document.createElement("rect");t.ship?r.classList.add("blue"):r.classList.add("black"),r.classList.add("player-cell"),r.setAttribute("x",`${s}`),r.setAttribute("y",`${e}`),a.appendChild(r)}))})),r.appendChild(a),s.appendChild(r)}(n,i),function(t,e){const s=document.querySelector("#main"),r=document.createElement("div"),a=document.createElement("div");a.classList.add("grid");const n=document.createElement("h1");n.innerText=e.getName(),r.appendChild(n),t.getBoard().forEach(((t,e)=>{t.forEach(((t,s)=>{const r=document.createElement("rect");r.classList.add("computer-cell"),r.classList.add("black"),r.setAttribute("x",`${s}`),r.setAttribute("y",`${e}`),a.appendChild(r)}))})),r.appendChild(a),s.appendChild(r)}(c,o),document.querySelectorAll(".computer-cell").forEach((t=>{t.addEventListener("click",(()=>{const e=s.attack(c,[parseInt(t.getAttribute("x"),10),parseInt(t.getAttribute("y"),10)]);if(e.true){if(a(e,"computer"),c.allShipsSunk())return void r(i);let t=s.attack(n);for(;!t.true;)t=s.attack(n);a(t,"player"),n.allShipsSunk()&&r(o)}}))}))})();
//# sourceMappingURL=app.bundle.js.map